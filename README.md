**Подробное описание файлов программы**

### ChatHost.Program

Содержит точку входа в приложение. Когда приложение запускается, метод `Main` создает `ServiceHost` для хостинга WCF-сервиса. Внутри `using` блока определены настройки хоста, такие как базовый адрес и поведение. При возникновении ошибки выводится сообщение об ошибке, а при успешном запуске выводится сообщение о том, что сервис запущен.

### Конфигурационный файл app.config

Используется для настройки параметров WCF-сервиса. Он содержит информацию о привязках, конечных точках и других параметрах, необходимых для настройки взаимодействия между клиентом и сервером.

### DiplomaProject.IServiceChat и DiplomaProject.IServiceChatCallback

Содержат интерфейсы, определяющие контракты WCF-службы и обратного вызова. `IServiceChat` определяет методы, которые могут вызываться клиентом на сервере, такие как подключение, отправка сообщений и изображений. `IServiceChatCallback` определяет методы, которые сервер может вызывать на клиенте для обратного вызова, например, для отправки сообщений и изображений клиенту.

### DiplomaProject.ServiceChat

Содержит реализацию службы WCF. Он реализует интерфейс `IServiceChat` и предоставляет логику для обработки запросов от клиентов, таких как подключение пользователей, отправка сообщений и изображений. Этот класс также обрабатывает обратные вызовы от клиентов через интерфейс `IServiceChatCallback`.

### DiplomaProject.ImageMessage

Содержит определение класса данных `ImageMessage`, который используется для передачи изображений между клиентом и сервером. Он содержит два члена данных: `ImageData`, представляющий массив байтов изображения, и `ImageName`, содержащий имя файла изображения.

### DiplomaProject.ServerUser

Содержит определение класса `ServerUser`, который представляет пользователя чата на сервере. Он содержит информацию о пользователе, такую как его идентификатор, имя и контекст операции.

### ChatClient.MainWindow

Содержит код для интерфейса клиентского приложения. Он представляет окно WPF, в котором пользователь может подключиться к серверу, отправлять сообщения и изображения, а также просматривать полученные сообщения и изображения. Этот файл также содержит логику для обработки событий, таких как нажатие кнопки и закрытие окна.



### Функции:

1. **ConnectUser()**: Метод в классе `MainWindow`, который инициирует подключение к серверу при нажатии кнопки "Connect". Он создает экземпляр `ServiceChatClient` для связи с сервером, отправляет запрос на подключение с именем пользователя и обрабатывает результат.

2. **DisconnectUser()**: Метод в классе `MainWindow`, который обрабатывает отключение от сервера при нажатии кнопки "Disconnect". Он отправляет запрос на отключение от сервера и обрабатывает результат.

3. **SendMessage()**: Метод в классе `MainWindow`, который отправляет сообщение на сервер. Он вызывается при нажатии клавиши "Enter" в текстовом поле сообщения. Он отправляет текст сообщения на сервер и очищает текстовое поле сообщения.

4. **btnSendImage_Click()**: Метод в классе `MainWindow`, который отправляет изображение на сервер. Он вызывается при нажатии кнопки "Отправить". Он загружает изображение с диска, конвертирует его в массив байтов и отправляет на сервер.

5. **MessageCallback()**: Метод в классе `MainWindow`, который вызывается сервером для отображения полученного сообщения. Он добавляет сообщение в список сообщений и прокручивает список вниз, чтобы показать последнее сообщение.

6. **ImageCallback()**: Метод в классе `MainWindow`, который вызывается сервером для отображения полученного изображения. Он вызывает метод `DisplayImageCallback()`, который отображает изображение в интерфейсе.

7. **DisplayImageCallback()**: Метод в классе `MainWindow`, который отображает полученное изображение в интерфейсе. Он конвертирует массив байтов изображения в изображение и добавляет его в список сообщений для отображения.

8. **Window_Closing()**: Метод в классе `MainWindow`, который вызывается при закрытии окна. Он обрабатывает отключение от сервера перед закрытием окна.

9. **lbChat_MouseRightButtonUp()**: Метод в классе `MainWindow`, который вызывается при щелчке правой кнопкой мыши на сообщении в списке сообщений. Он отображает контекстное меню для сохранения изображения на диск.

